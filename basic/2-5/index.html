<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.26" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/images/favicon.png" type="image/x-icon" />

    <title>2-5 Defining class :: COMP312 labs</title>
    
    
    <link href="/css/nucleus.css?1504144461" rel="stylesheet">
    <link href="/css/font-awesome.min.css?1504144461" rel="stylesheet">
    <link href="/css/hybrid.css?1504144461" rel="stylesheet">
    <link href="/css/featherlight.min.css?1504144461" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1504144461" rel="stylesheet">
    <link href="/css/horsey.css?1504144461" rel="stylesheet">
    <link href="/css/theme.css?1504144461" rel="stylesheet">
    <link href="/css/hugo-theme.css?1504144461" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js?1504144461"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/basic/2-5/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="http://www.ipm.edu.mo/">
<b>COMP312 Internet Programming II</b>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1504144461"></script>
<script type="text/javascript" src="/js/horsey.js?1504144461"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/philiplei.github.io\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1504144461"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/basic/" title="JavaScript basics" class="dd-item 
        parent
        
        
        ">
      <a href="/basic/">
          JavaScript basics
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/basic/2-1/" title="2-1 Basic data types and control" class="dd-item ">
        <a href="/basic/2-1/">
        2-1 Basic data types and control
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/basic/2-2/" title="2-2 Arrays and functions" class="dd-item ">
        <a href="/basic/2-2/">
        2-2 Arrays and functions
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/basic/2-3/" title="2-3 Objects and JSON data" class="dd-item ">
        <a href="/basic/2-3/">
        2-3 Objects and JSON data
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/basic/2-4/" title="2-4 Callbacks and arrow functions" class="dd-item ">
        <a href="/basic/2-4/">
        2-4 Callbacks and arrow functions
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/basic/2-5/" title="2-5 Defining class" class="dd-item active">
        <a href="/basic/2-5/">
        2-5 Defining class
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/basic/2-6/" title="2-6 Regular expression" class="dd-item ">
        <a href="/basic/2-6/">
        2-6 Regular expression
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/client/" title="Client-side programming" class="dd-item 
        
        
        
        ">
      <a href="/client/">
          Client-side programming
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/client/3-1/" title="3-1 Quick start" class="dd-item ">
        <a href="/client/3-1/">
        3-1 Quick start
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/client/3-2/" title="3-2 Select and change" class="dd-item ">
        <a href="/client/3-2/">
        3-2 Select and change
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/client/3-3/" title="3-3 Creating new content" class="dd-item ">
        <a href="/client/3-3/">
        3-3 Creating new content
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/client/3-4/" title="3-4 Handling events" class="dd-item ">
        <a href="/client/3-4/">
        3-4 Handling events
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/client/3-5/" title="3-5 Form controls" class="dd-item ">
        <a href="/client/3-5/">
        3-5 Form controls
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/client/3-6/" title="3-6 Templates" class="dd-item ">
        <a href="/client/3-6/">
        3-6 Templates
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/client/3-7/" title="3-7 Charts" class="dd-item ">
        <a href="/client/3-7/">
        3-7 Charts
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/client/3-8/" title="3-8 Script execution in browsers" class="dd-item ">
        <a href="/client/3-8/">
        3-8 Script execution in browsers
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/server/" title="Server-side programming" class="dd-item 
        
        
        
        ">
      <a href="/server/">
          Server-side programming
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/server/4-1/" title="4-1 Node.js primer" class="dd-item ">
        <a href="/server/4-1/">
        4-1 Node.js primer
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/server/4-2/" title="4-2 NPM modules" class="dd-item ">
        <a href="/server/4-2/">
        4-2 NPM modules
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/server/4-3/" title="4-3 Web app routing" class="dd-item ">
        <a href="/server/4-3/">
        4-3 Web app routing
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/server/4-4/" title="4-4 Web app middlewares" class="dd-item ">
        <a href="/server/4-4/">
        4-4 Web app middlewares
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/server/4-5/" title="4-5 Templates and file modules" class="dd-item ">
        <a href="/server/4-5/">
        4-5 Templates and file modules
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/server/4-6/" title="4-6 Database access" class="dd-item ">
        <a href="/server/4-6/">
        4-6 Database access
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/server/4-7/" title="4-7 A sample web app" class="dd-item ">
        <a href="/server/4-7/">
        4-7 A sample web app
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/webapi/" title="Ajax and Web API" class="dd-item 
        
        
        
        ">
      <a href="/webapi/">
          Ajax and Web API
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/webapi/5-1/" title="5-1 Designing a Web API" class="dd-item ">
        <a href="/webapi/5-1/">
        5-1 Designing a Web API
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/webapi/5-2/" title="5-2 Implementing a Web API" class="dd-item ">
        <a href="/webapi/5-2/">
        5-2 Implementing a Web API
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/webapi/5-3/" title="5-3 Consuming a Web API" class="dd-item ">
        <a href="/webapi/5-3/">
        5-3 Consuming a Web API
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fa fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable sticky-parent">
              
              <div class="sticky-spacer">
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'></a> > <a href='/basic/'>JavaScript basics</a> > 2-5 Defining class
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#object-literals">Object literals</a></li>
<li><a href="#some-built-in-class">Some built-in class</a>
<ul>
<li><a href="#array">Array</a></li>
<li><a href="#map">Map</a></li>
<li><a href="#date">Date</a></li>
</ul></li>
<li><a href="#defining-class">Defining class</a></li>
<li><a href="#exercise">Exercise</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>2-5 Defining class</h1>
          

        



<h2 id="object-literals">Object literals</h2>

<p>Many values in JavaScript are objects. In lab 2-3, we created an object as a group of properties. Each property has a name and a value. We list the properties in <code>{ }</code>. Such objects have already some built-in methods. For example, <code>point.toString()</code> returns a string representation of the object, although the default implementation is not useful.</p>

<pre><code class="language-JavaScript">var point = { x: 2, y: 3 };
console.log(point.toString());
</code></pre>

<p>You can define a more useful version of <code>.toString()</code> by adding a method, which is just a property with function value. In a method, <code>this</code> refers to the object used to invoke the method.</p>

<pre><code class="language-JavaScript">var point = {
  x: 2,
  y: 3,
  toString: function() { return `(${this.x},${this.y})` }
};
console.log(point.toString());
</code></pre>

<h2 id="some-built-in-class">Some built-in class</h2>

<p>On the other hand, the JavaScript language defines several built-in class, each with its own <dfn>constructor function</dfn> to create objects of the class.  Objects thus created usually have built-in methods as defined in the class.</p>

<p>In OOP sense, a <dfn>class</dfn> defines a template for similar objects, and provides (at least) one constructor function to build new objects belonging to the class.</p>

<h3 id="array">Array</h3>

<p>JavaScript arrays are JavaScript objects. Typically, you construct an array with the syntax <code>[1,2,3]</code>.
An array object has many methods, and you can invoke them with the dot notation. Refer to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array#Array_instances">online ref</a> for a list of methods of array objects.</p>

<pre><code class="language-JavaScript">// array literal uses the constructor of Array class
var a = [2,3,4];
a.unshift(1);
a.push(5);
var b = a.map(x=&gt;x*2-1);
console.log(b.join(','));
</code></pre>

<p>But you can also use the general constructor function syntax. In most cases, you must call the constructor function with the keyword <code>new</code>. A new object is then created and returned.</p>

<pre><code class="language-JavaScript">// same as var b = [2,4,6,8,10]
var b = new Array(2,4,6,8,10);
for (var x of b) {
  console.log(x);
}
</code></pre>

<h3 id="map">Map</h3>

<p>ES6 defines a new kind of collections called <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a>. A map stores key/value pairs.
(In previous version of JavaScript, objects are often used as map.) You create a Map by submitting a list of key/value pairs to the constructor. Each pair is written as an array of two elements, namely key and value. You retrieve an element from a map using a key with the method <code>.get(key)</code>. You add / replace an element in the map with the method <code>.set(key,value)</code>. You can also delete an element from a map with <code>.delete(key)</code>, and check the number of elements with the property <code>.size</code>.</p>

<pre><code class="language-JavaScript">// creates a new Map with two key/value pairs
var m = new Map([ ['one', 1], ['two', 2] ]);
// use .get to retrieve an element
console.log('one =&gt; ', m.get('one'));
// use .set to add / replace an element
m.set('three', 3);
// now, m is Map {&quot;one&quot; =&gt; 1, &quot;two&quot; =&gt; 2, &quot;three&quot; =&gt; 3}
console.log(&quot;Does the map contains the key 'four'? &quot;, m.has('four'));
console.log('No, so .get returns ', m.get('four'));  // undefined
</code></pre>

<p>A map is iterable, and the <code>for .. of</code> loop returns a key/value pair in each step.</p>

<pre><code class="language-JavaScript">var m = new Map([ ['one', 1], ['two', 2], ['three', 3] ]);
for (var [k,v] of m) {
  console.log(`k = ${k}  v = ${v}`);
}
</code></pre>

<h3 id="date">Date</h3>

<p>Another common built-in class is <code>Date</code>, which represents a single moment in time. <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Date">(online reference)</a></p>

<pre><code class="language-JavaScript">// call a constructor to create a Date object,
// which equals to this moment
var now = new Date();
// create a Date object for the Macau SAR establishment day
var sare = new Date(&quot;1999-12-20&quot;);
// create a Date object for the coming X'mas
var xmas = new Date(2016,11,25); // month: 0-11. Confusing!
</code></pre>

<pre><code class="language-JavaScript">// a Date object has some methods
var now = new Date();
var dow = now.getDay(); // 0-6, where 0 means Sunday
console.log(now.toLocaleString());
</code></pre>

<h2 id="defining-class">Defining class</h2>

<p>ES6 has a new syntax to define class. It is similar to the syntax in Java.
A class is a template to create similar objects, with a constructor function (which builds new object of the class) and methods (which access properties of the object using <code>this</code>).</p>

<p>You typically call the constructor function with <code>new</code>. In the constructor, <code>this</code> refers to the new object being created. You should initialize all properties inside the constructor.  Notice that in JavaScript, you don&rsquo;t need to define the properties (as you define attributes in a Java class).</p>

<p>In a method, <code>this</code> refers to the object that invokes the method. Methods defined in a class are available for all objects created using the constructor function.</p>

<pre><code class="language-JavaScript">class Point {
  // create a Point object with the given x-, y- coordinates
  constructor (x,y) {
    // this refers to the new object being built
    this.x = x; this.y = y;
  }
  // a method to convert the point into a string
  toString () {
    // this refers to the object that invokes the method
    return `(${this.x},${this.y})`;
  }
};

var p1 = new Point(3,4);
console.log('p1 is ', p1.toString());
// same as below. JavaScript calls the method toString when needed
// console.log('p1 is ', p1);
</code></pre>

<p>The object created by a constructor is similar to object literal in common usage. (But there are some difference about <code>prototype</code> in implementation detail that we&rsquo;ll not cover.)
Use a class when you need to create many objects using a common template.</p>

<pre><code class="language-JavaScript">// assume you've run the code listing above
// examine the structure of the object created with constructor
dir(p1);

// and here is an object literal
var p2 = { x: 2, y: 5 };
p2.toString = function() { return `(${this.x},${this.y})` }
dir(p2);
</code></pre>

<p>All properties in JavaScript objects are public. So you can access the properties in a function.</p>

<pre><code class="language-JavaScript">function distanceBetween (p1,p2) {
  return Math.hypot(p1.x-p2.x, p1.y-p2.y);
}

function midpoint (p1, p2) {
  var midx = (p1.x+p2.x)/2;
  var midy = (p1.y+p2.y)/2;
  return new Point(midx, midy);
}
</code></pre>

<h2 id="exercise">Exercise</h2>

<ol>
<li><p>Define a class <code>Circle</code> that can be used in the following ways. Hints: the class contains a constructor, a method <code>area</code> to calculate the area of the circle, a method <code>toString</code> to convert the object into string, and a method <code>move(x,y)</code> to move the center of the circle to the given location.</p>

<pre><code class="language-JavaScript">var c = new Circle(1,2,10);
var a = c.area();
console.log(`The area is ${a}.`);
// this calls c.toString()
console.log(`c is ${c}`);
// c is a circle at (1,2) of radius 10
c.move(-1,0);
console.log(`c is ${c}`);
// c is a circle at (-1,0) of radius 10
</code></pre></li>

<li><p>Define a function <code>contains(c1,c2)</code> that takes two Circle objects as parameters and determine whether the first circle contains the second completely. Test your work with the following.</p>

<pre><code class="language-JavaScript">var c1 = new Circle(0, 0, 10);
var c2 = new Circle(3, 4, 4);
var c3 = new Circle(3, 4, 8);
console.log('c1 contains c2? ', contains(c1,c2) );  // true
console.log('c1 contains c3? ', contains(c1,c3) );  // false
</code></pre></li>
</ol>

<p>The <a href="/chap2/p221.js">sample answer</a> is available.</p>

<!--
You can also iterate on the keys or values of a map. `m.keys()` and `m.values()`
return an iterable collection that contains the keys and values. And you can also use the spread operator `...` to insert the content of these collections into an array.

```JavaScript
var m = new Map([ ['one', 1], ['two', 2], ['three', 3] ]);
for (var k of m.keys()) {
  console.log(`k = ${k}`);
}

console.log('The keys are ', [...m.keys()]);
console.log('The values are ', [...m.values()]);
console.log('The elements are ', [...m]);
```


Example.

```JavaScript
var para = `JavaScript is a high-level, dynamic, untyped, and interpreted programming language. It has been standardized in the ECMAScript language specification. Alongside HTML and CSS, it is one of the three core technologies of World Wide Web content production; the majority of websites employ it and it is supported by all modern Web browsers without plug-ins. JavaScript is prototype-based with first-class functions, making it a multi-paradigm language, supporting object-oriented, imperative, and functional programming styles. It has an API for working with text, arrays, dates and regular expressions, but does not include any I/O, such as networking, storage, or graphics facilities, relying for these upon the host environment in which it is embedded.`;
// use space and punctuation marks to split the string into words
var words = para.split(/[ ,\.;\-]/);
// remove empty string
words = words.filter(w => w!=="");
// change all words into lower case
words = words.map(w => w.toLowerCase()); // 116 words in the paragraph

// count number of times a word appear in the paragraph
var wordCount = new Map();
for (var w of words) {
  if (wordCount.has(w)) {
    wordCount.set(w, wordCount.get(w)+1);
  } else {
    wordCount.set(w, 1);
  }
}

// print which words appear more than once
for (var [k,v] of wordCount) {
  if (v==1) continue;
  console.log(`${k}: ${v}`);
}
```
-->


<footer class=" footline" >
	
</footer>


        
        </div> 
      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/basic/2-4/" title="2-4 Callbacks and arrow functions"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/basic/2-6/" title="2-6 Regular expression" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1504144461"></script>
    <script src="/js/perfect-scrollbar.min.js?1504144461"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1504144461"></script>
    <script src="/js/jquery.sticky-kit.min.js?1504144461"></script>
    <script src="/js/featherlight.min.js?1504144461"></script>
    <script src="/js/html5shiv-printshiv.min.js?1504144461"></script>
    <script src="/js/highlight.pack.js?1504144461"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js?1504144461"></script>
    <script src="/js/learn.js?1504144461"></script>
    <script src="/js/hugo-learn.js?1504144461"></script>

    <link href="/mermaid/mermaid.css?1504144461" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1504144461"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

