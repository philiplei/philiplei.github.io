<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.16" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />

    
    <title>2-6 Regular expression</title>
    <link href="/css/nucleus.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/hybrid.css" rel="stylesheet">
    <link href="/css/featherlight.min.css" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
    <link href="/css/hugo-theme.css" rel="stylesheet">
    <style type="text/css">:root #header + #content > #left > #rlblock_left
    {display:none !important;}</style>
    

  </head>
  <body class="" data-url="/basic/2-6/">
    <nav id="sidebar">
  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="http://www.ipm.edu.mo/">
<b>COMP312 Internet Programming II</b>
</a>

      
    </div>
</div>


  <div class="highlightable">
    <ul class="topics">
      
      
      
      

      <li class="dd-item  parent" data-nav-id="/basic/">
        <a href="/basic/">
          <span>
            
              <b>2. </b>
            
             JavaScript basics
            
           </span>
        </a>
        
        <ul>
          
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-1/">
              <a href="/basic/2-1/">
                <span>2-1 Basic data types and control     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-2/">
              <a href="/basic/2-2/">
                <span>2-2 Arrays and functions     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-3/">
              <a href="/basic/2-3/">
                <span>2-3 Objects and JSON data     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-4/">
              <a href="/basic/2-4/">
                <span>2-4 Callbacks and arrow functions     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-5/">
              <a href="/basic/2-5/">
                <span>2-5 Defining class     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item active" data-nav-id="/basic/2-6/">
              <a href="/basic/2-6/">
                <span>2-6 Regular expression     </i></span>
              </a>
            </li>
          
          
        </ul>
        
      </li>
      
      
      
      

      <li class="dd-item  " data-nav-id="/client/">
        <a href="/client/">
          <span>
            
              <b>3. </b>
            
             Client-side programming
            
           </span>
        </a>
        
        <ul>
          
          
          
          
            <li class="dd-item " data-nav-id="/client/3-1/">
              <a href="/client/3-1/">
                <span>3-1 Quick start     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-2/">
              <a href="/client/3-2/">
                <span>3-2 Select and change     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-3/">
              <a href="/client/3-3/">
                <span>3-3 Creating new content     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-4/">
              <a href="/client/3-4/">
                <span>3-4 Handling events     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-5/">
              <a href="/client/3-5/">
                <span>3-5 Form controls     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-6/">
              <a href="/client/3-6/">
                <span>3-6 Templates     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-7/">
              <a href="/client/3-7/">
                <span>3-7 Charts     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-8/">
              <a href="/client/3-8/">
                <span>3-8 Script execution in browsers     </i></span>
              </a>
            </li>
          
          
        </ul>
        
      </li>
      
      
      
      

      <li class="dd-item  " data-nav-id="/server/">
        <a href="/server/">
          <span>
            
              <b>4. </b>
            
             Server-side programming
            
           </span>
        </a>
        
        <ul>
          
          
          
          
            <li class="dd-item " data-nav-id="/server/4-1/">
              <a href="/server/4-1/">
                <span>4-1 Node.js primer     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-2/">
              <a href="/server/4-2/">
                <span>4-2 NPM modules     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-3/">
              <a href="/server/4-3/">
                <span>4-3 Web app routing     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-4/">
              <a href="/server/4-4/">
                <span>4-4 Web app middlewares     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-5/">
              <a href="/server/4-5/">
                <span>4-5 Templates and file modules     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-6/">
              <a href="/server/4-6/">
                <span>4-6 Database access     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-7/">
              <a href="/server/4-7/">
                <span>4-7 A sample web app     </i></span>
              </a>
            </li>
          
          
        </ul>
        
      </li>
      
      
    </ul>
    <hr>
      
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fa fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>
    </section>
  </div>
</nav>

        <section id="body">
        <div id="overlay"></div>

        <div class="padding highlightable">

            <div id="top-bar">
              
              <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                  <span id="sidebar-toggle-span">
                      <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                        <i class="fa fa-bars"></i>
                      </a>
                  </span>
                
                <span id="toc-menu"><a href=""><i class="fa fa-list-alt"></i></a></span>
                
                
                
                
                  
                    
                    
                <a href="/basic/" itemprop="url"><span itemprop="title">JavaScript basics</span></a> <i class="fa fa-angle-right"></i>
                    
                  
                
                  
                
                  
                
                <span itemprop="title"> 2-6 Regular expression</span>
              </div>
              
                  <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#regexp-object">Regexp object</a></li>
<li><a href="#choice">Choice</a></li>
<li><a href="#repetition">Repetition</a></li>
<li><a href="#position-matching">Position matching</a></li>
<li><a href="#other-regexp-methods">Other regexp methods</a></li>
<li><a href="#exercise">Exercise</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

              

            </div>
            
    	        <div id="body-inner">
                
                <h1>2-6 Regular expression</h1>
                



<h2 id="regexp-object">Regexp object</h2>

<p>A regular expression (regexp) defines pattern used to search, replace and extract information from strings. It is a small language that many common programming languages have support for it.</p>

<p>A common usage of regexp is to check whether user input is correct.  The following example checks whether the user input is an email address in IPM.</p>

<pre><code class="language-JavaScript">var s = prompt (&quot;Your IPM student email address please&quot;);
// define a regular expression
var re = /p\d{7}@ipm\.edu\.mo/;
if (re.test(s)) {
   alert(`Thanks. Your email is ${s}`);
} else {
   alert(&quot;This is not an email addr in IPM.&quot;);
}
</code></pre>

<p>Regexps are JavaScript objects (with methods). A simple way to create a regular expression is with the regexp literal <code>/ /</code>.  Regexps are usually referred to as patterns. The method <code>regexp.test(string)</code> checks whether a substring of the given string matches the regular expression.</p>

<p>Letters and digits in patterns match themselves. Regexps may contain parts with choice and repetition.</p>

<h2 id="choice">Choice</h2>

<p>There are several ways to represent choices in regular expressions. You can use <code>|</code> to separate strings / sub-patterns in a choice.</p>

<p>Use the web site <a href="https://regex101.com/#javascript">regex101.com</a> to test the regexp below.</p>

<table>
<thead>
<tr>
<th>Regexp</th>
<th>matches &hellip;</th>
</tr>
</thead>

<tbody>
<tr>
<td>/apple|orange|banana/</td>
<td>&ldquo;apple&rdquo;, &ldquo;orange&rdquo;, &ldquo;banana&rdquo;</td>
</tr>

<tr>
<td>/(Mr|Ms) (Chan|Lam)/</td>
<td>&ldquo;Mr Chan&rdquo;, &ldquo;Ms Chan&rdquo;, &ldquo;Mr Lam&rdquo;, &ldquo;Ms Lam&rdquo;</td>
</tr>
</tbody>
</table>

<p>A choice of 1 character (e.g. <code>/T|F/</code>) can be written in the character class format: write the possible characters between a pair of square parenthesis (e.g. <code>/[TF]/</code>). You can also use a range (e.g. <code>/[1-5]/</code>) to match one character within the range. Or you start a character class with <code>^</code> to match  any character except the listed characters.  Some examples follow.</p>

<table>
<thead>
<tr>
<th>character class</th>
<th>matches &hellip;</th>
<th>note</th>
</tr>
</thead>

<tbody>
<tr>
<td>[13579]</td>
<td>&ldquo;1&rdquo;, &ldquo;3&rdquo;, &ldquo;5&rdquo;, &ldquo;7&rdquo;, &ldquo;9&rdquo;</td>
<td><em>same as</em> /1|3|5|7|9/</td>
</tr>

<tr>
<td>[1-6]</td>
<td>&ldquo;1&rdquo;, &ldquo;2&rdquo;, &ldquo;3&rdquo;, &ldquo;4&rdquo;, &ldquo;5&rdquo;, &ldquo;6&rdquo;</td>
<td><em>same as</em> /1|2|3|4|5|6/ <em>or</em> /[4651-3]/</td>
</tr>

<tr>
<td>[a-zA-Z]</td>
<td>&ldquo;A&rdquo;, &ldquo;B&rdquo;, &ldquo;C&rdquo; &hellip; &ldquo;Z&rdquo;, &ldquo;a&rdquo;, &ldquo;b&rdquo;, &hellip; &ldquo;z&rdquo;</td>
<td>letters, <em>same as</em> /[A-Za-z]/</td>
</tr>

<tr>
<td>[^0-9]</td>
<td>&ldquo;x&rdquo;, &ldquo;%&rdquo;, &ldquo;Z&rdquo;, &hellip;</td>
<td>any character except digits</td>
</tr>
</tbody>
</table>

<p>There are also some predefined character classes for common cases:</p>

<table>
<thead>
<tr>
<th>character class</th>
<th>matches &hellip;</th>
<th>note</th>
</tr>
</thead>

<tbody>
<tr>
<td>\d</td>
<td>&ldquo;0&rdquo;, &ldquo;1&rdquo;, &ldquo;2&rdquo;, &hellip; , &ldquo;9&rdquo;</td>
<td><em>same as</em> [0-9]</td>
</tr>

<tr>
<td>\w</td>
<td>&ldquo;a&rdquo;, &ldquo;B&rdquo;, &ldquo;1&rdquo;, &ldquo;9&rdquo;, &ldquo;_&ldquo;, &hellip;</td>
<td><em>same as</em> [a-zA-Z0-9_]</td>
</tr>

<tr>
<td>\s</td>
<td>&rdquo; &ldquo;, <em>tab</em>, <em>new line</em></td>
<td><em>same as</em> [ \t\r\n\v\f]</td>
</tr>

<tr>
<td>.</td>
<td>&ldquo;a&rdquo;, &ldquo;z&rdquo;, &ldquo;X&rdquo;, &ldquo;5&rdquo;, &ldquo;?&rdquo;&hellip;</td>
<td>any character except newline</td>
</tr>
</tbody>
</table>

<p>Note: to match the period, you have to escape it (<code>\.</code>).</p>

<p>Some sample regexp to match strings:</p>

<table>
<thead>
<tr>
<th>regexp</th>
<th>matches &hellip;</th>
<th>note</th>
</tr>
</thead>

<tbody>
<tr>
<td>/iP[ao]d/</td>
<td>&ldquo;iPad&rdquo;, &ldquo;iPod&rdquo;</td>
<td><em>but not</em> &ldquo;iPxd&rdquo; or &ldquo;iPaod&rdquo;</td>
</tr>

<tr>
<td>/p-\d\d-\d\d\d\d-\d/</td>
<td>&ldquo;p-13-2233-6&rdquo;, ..</td>
<td>student id in MPI</td>
</tr>

<tr>
<td>/M[A-Z]-\d\d\d\d/</td>
<td>&ldquo;MD-8866&rdquo;, &ldquo;MW-0246&rdquo;, ..</td>
<td>but not &ldquo;M-2325&rdquo;</td>
</tr>
</tbody>
</table>

<h2 id="repetition">Repetition</h2>

<p>There are several ways to repeat a character or a group. <code>{n}</code> repeats a group exactly <code>n</code> times.
<code>{a,}</code> repeats a group at least <code>a</code> times. <code>{a,b}</code> repeats a group at least <code>a</code> times, but at most <code>b</code> times.  <code>?</code> is the same as <code>{0,1}</code> and means the group is optional.
<code>+</code> is the same as <code>{1,}</code> and means the group can be repeated any number of times.
<code>*</code> is the same as <code>{0,}</code> and means that the group can be repeated, but is also optional.</p>

<table>
<thead>
<tr>
<th>regexp</th>
<th>matches &hellip;</th>
<th>note</th>
</tr>
</thead>

<tbody>
<tr>
<td>/\d+/</td>
<td>&ldquo;0&rdquo;, &ldquo;1&rdquo;, &ldquo;23&rdquo;, &ldquo;400&rdquo;, &ldquo;9999&rdquo;, &hellip;, and also &ldquo;0003000&rdquo;</td>
<td>positive integer, possibly with leading zero</td>
</tr>

<tr>
<td>/[1-9]\d*/</td>
<td>&ldquo;1&rdquo;, &ldquo;2&rdquo;, &ldquo;3&rdquo;, &hellip; &ldquo;10&rdquo;, &ldquo;11&rdquo;, &hellip;, <em>but not</em> &ldquo;0&rdquo;, &ldquo;004&rdquo;, &ldquo;010&rdquo;</td>
<td>positive integer with no leading zero</td>
</tr>

<tr>
<td>/[2568]\d{7}/</td>
<td>&ldquo;28334455&rdquo;, &ldquo;59963356&rdquo;, &ldquo;66778899&rdquo;, ..</td>
<td>Macau tel numbers (but still misses some cases)</td>
</tr>

<tr>
<td>/s[a-z]+s/</td>
<td>&ldquo;sos&rdquo;, &ldquo;smiles&rdquo;, &hellip;</td>
<td>words that start and end with &rsquo;s&rsquo;</td>
</tr>

<tr>
<td>/apples?/</td>
<td>&ldquo;apple&rdquo;, &ldquo;apples&rdquo;</td>
<td></td>
</tr>

<tr>
<td>/peach(es)?/</td>
<td>&ldquo;peach&rdquo;, &ldquo;peaches&rdquo;</td>
<td></td>
</tr>

<tr>
<td>/\d+(\.\d+)?/</td>
<td>&ldquo;12&rdquo;, &ldquo;0.5&rdquo;, &ldquo;12.34&rdquo;, ..</td>
<td>decimal number</td>
</tr>

<tr>
<td>/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/ <em>or</em> /\d{1,3}(\.\d{1,3}){3}/</td>
<td>&ldquo;202.175.3.28&rdquo;, &ldquo;1.0.0.1&rdquo;, ..</td>
<td>IP address. Note that we need to escape the dot <code>\.</code></td>
</tr>

<tr>
<td>/\d+([+\-*/]\d+)+/</td>
<td>&ldquo;1+2*3&rdquo;, &ldquo;10-<sup>2</sup>&frasl;<sub>3</sub>+68&rdquo;, &ldquo;8*8&rdquo;, &hellip;</td>
<td>arith expression</td>
</tr>

<tr>
<td>/\d\d?:\d\d(am|pm)/</td>
<td>&ldquo;8:00am&rdquo;, &ldquo;5:30pm&rdquo;, &ldquo;11:30pm&rdquo;, …</td>
<td></td>
</tr>

<tr>
<td>/(Mr|Mrs|Ms) \w+/</td>
<td>&ldquo;Mr Chan&rdquo;, &ldquo;Mrs Cheong&rdquo;, &ldquo;Ms Lam&rdquo;, &hellip;</td>
<td>Mr, Mrs or Ms</td>
</tr>
</tbody>
</table>

<h2 id="position-matching">Position matching</h2>

<p>Recall that the method <code>regexp.text(string)</code> tests whether <em>a substring</em> of the given string matches the regexp. To make sure that the whole string matches the pattern, you can anchor the pattern at the start with <code>^</code> and the end with <code>$</code>.  &lsquo;^&rsquo; matches the start of a string or a line. &lsquo;$&rsquo; matches the end of a string or a line.</p>

<pre><code class="language-JavaScript">// a pattern to match Macau tel numbers (8 digits)
var re = /\d{8}/;
re.test('66778899'); // return true
re.test('141'); // return false
// however
re.test('ABC 59961234 XYZ'); // return true
re.test('1234567890'); // return true

// use position matching
var re2 = /^\d{8}$/;
re2.test(' 12345678 '); // return false
re2.test('1234567890'); // return false
re2.test('66778899'); // return true
</code></pre>

<p>Another common position matching case is word boundary <code>\b</code>. This works similar to &ldquo;match whole words&rdquo; in Microsoft Word.</p>

<h2 id="other-regexp-methods">Other regexp methods</h2>

<p>The string objects also have a few methods <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">online ref</a> that support regular expression. We&rsquo;ll give two examples here.</p>

<p>The <code>string.match(regexp)</code> method returns substrings in the string that match the regexp. If the regexp has the global flag (g), the method returns an array of all matches. Otherwise, it only returns the first match.</p>

<pre><code class="language-JavaScript">// find all prices in the string
var s = &quot;$60 + $70 = $130&quot;;
var A = s.match(/\$\d+/g);
// A is [&quot;$60&quot;, &quot;$70&quot;, &quot;$130&quot;];
</code></pre>

<p>The <code>string.split(regexp)</code> method splits the string into an array of substring. The parts were separated by delimiters matched by the regexp.</p>

<pre><code class="language-JavaScript">var s = &quot;1+2*3-4&quot;;
var nums = s.split(/[+\-*/]/);
// nums is [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;]
</code></pre>

<h2 id="exercise">Exercise</h2>

<p>Write a regular expression to match the strings in the following cases.</p>

<ol>
<li>An integer between 0 and 9999 inclusively (i.e. including 0 and 9999). Leading zero is accepted.</li>
<li>A name that begins with a capital letter, e.g. ‘Ana’, ‘Ben’, but not ‘eric’, ‘McDonald’</li>
<li>A name that begins with a capital letter and contains another capital letter, e.g. ‘McDonald’, ‘MaBelle’, but not ‘Mary’, ‘AbCdE’</li>
<li>A date in the form dd-mm-yyyy, e.g. ‘01-01-2011’, ’31-12-2011’.</li>
<li>A file name of Microsoft Word and Powerpoint documents, e.g. ‘note.doc’, ‘hw1.docx’, ‘chap1.ppt’, ‘final.pptx’, but not ‘a.txt’, ‘ppt.txt’</li>
<li>A string of alternating ‘a’ and ‘b’, e.g. ‘aba’, ‘ababa’, ‘ab’, ‘ba’, ‘a’, ‘b’, ‘babab’, ‘baba’. Your pattern should not match ‘aa’, ‘abaaa’, ‘abcba’, etc..</li>
<li>A JavaScript object literal which has numbers as all property values. E.g. ‘{ a: 1, b: 2, cc: 33 }’, ‘{  }’, ‘{ longproperty   :  1000 }’. You can assume that the property names are not quoted. Allow space characters within the object literal.</li>
</ol>

<p>You may find the <a href="/chap2/p301.js">sample answer</a> here.</p>


      
      </div>
    </div>

    <div id="navigation">
        
        
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/jquery-2.x.min.js"></script>
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/perfect-scrollbar.min.js"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="/js/jquery.sticky-kit.min.js"></script>
    <script src="/js/featherlight.min.js"></script>
    <script src="/js/html5shiv-printshiv.min.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js"></script>
    <script src="/js/learn.js"></script>
    <script src="/js/hugo-learn.js"></script>
    

  </body>
</html>

