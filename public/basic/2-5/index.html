<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.16" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />

    
    <title>2-5 Defining class</title>
    <link href="/css/nucleus.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/hybrid.css" rel="stylesheet">
    <link href="/css/featherlight.min.css" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
    <link href="/css/hugo-theme.css" rel="stylesheet">
    <style type="text/css">:root #header + #content > #left > #rlblock_left
    {display:none !important;}</style>
    

  </head>
  <body class="" data-url="/basic/2-5/">
    <nav id="sidebar">
  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="http://www.ipm.edu.mo/">
<b>COMP312 Internet Programming II</b>
</a>

      
    </div>
</div>


  <div class="highlightable">
    <ul class="topics">
      
      
      
      

      <li class="dd-item  parent" data-nav-id="/basic/">
        <a href="/basic/">
          <span>
            
              <b>2. </b>
            
             JavaScript basics
            
           </span>
        </a>
        
        <ul>
          
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-1/">
              <a href="/basic/2-1/">
                <span>2-1 Basic data types and control     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-2/">
              <a href="/basic/2-2/">
                <span>2-2 Arrays and functions     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-3/">
              <a href="/basic/2-3/">
                <span>2-3 Objects and JSON data     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-4/">
              <a href="/basic/2-4/">
                <span>2-4 Callbacks and arrow functions     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item active" data-nav-id="/basic/2-5/">
              <a href="/basic/2-5/">
                <span>2-5 Defining class     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-6/">
              <a href="/basic/2-6/">
                <span>2-6 Reg expression     </i></span>
              </a>
            </li>
          
          
        </ul>
        
      </li>
      
      
      
      

      <li class="dd-item  " data-nav-id="/client/">
        <a href="/client/">
          <span>
            
              <b>3. </b>
            
             Client-side programming
            
           </span>
        </a>
        
        <ul>
          
          
          
          
            <li class="dd-item " data-nav-id="/client/3-1/">
              <a href="/client/3-1/">
                <span>3-1 Quick start     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-2/">
              <a href="/client/3-2/">
                <span>3-2 Select and change     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-3/">
              <a href="/client/3-3/">
                <span>3-3 Creating new content     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-4/">
              <a href="/client/3-4/">
                <span>3-4 Handling events     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-5/">
              <a href="/client/3-5/">
                <span>3-5 Form controls     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-6/">
              <a href="/client/3-6/">
                <span>3-6 Template     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-7/">
              <a href="/client/3-7/">
                <span>3-7 Charts     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-8/">
              <a href="/client/3-8/">
                <span>3-8 Page load and others     </i></span>
              </a>
            </li>
          
          
        </ul>
        
      </li>
      
      
      
      

      <li class="dd-item  " data-nav-id="/server/">
        <a href="/server/">
          <span>
            
              <b>4. </b>
            
             Server-side programming
            
           </span>
        </a>
        
        <ul>
          
          
          
          
            <li class="dd-item " data-nav-id="/server/4-1/">
              <a href="/server/4-1/">
                <span>4-1 Node.js primer     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-2/">
              <a href="/server/4-2/">
                <span>4-2 Events     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-3/">
              <a href="/server/4-3/">
                <span>4-3 Web client     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-4/">
              <a href="/server/4-4/">
                <span>4-4 Routing in web app     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-5/">
              <a href="/server/4-5/">
                <span>4-5 Middleware in web app     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-6/">
              <a href="/server/4-6/">
                <span>4-6 Template in web app     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-7/">
              <a href="/server/4-7/">
                <span>4-7 Database access     </i></span>
              </a>
            </li>
          
          
        </ul>
        
      </li>
      
      
    </ul>
    <hr>
      
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fa fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>
    </section>
  </div>
</nav>

        <section id="body">
        <div id="overlay"></div>

        <div class="padding highlightable">

            <div id="top-bar">
              
              <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                  <span id="sidebar-toggle-span">
                      <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                        <i class="fa fa-bars"></i>
                      </a>
                  </span>
                
                <span id="toc-menu"><a href=""><i class="fa fa-list-alt"></i></a></span>
                
                
                
                
                  
                    
                    
                <a href="/basic/" itemprop="url"><span itemprop="title">JavaScript basics</span></a> <i class="fa fa-angle-right"></i>
                    
                  
                
                  
                
                  
                
                <span itemprop="title"> 2-5 Defining class</span>
              </div>
              
                  <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#array-as-class">Array as Class</a></li>
<li><a href="#date">Date</a></li>
<li><a href="#maps">Maps</a></li>
<li><a href="#defining-class">Defining class</a></li>
<li><a href="#exercise">Exercise</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

              

            </div>
            
    	        <div id="body-inner">
                
                <h1>2-5 Defining class</h1>
                



<p>Before we discuss how to define our own class, let&rsquo;s first look at some sample classes in the JavaScript language.</p>

<p>Many values in JavaScript are objects. In lab 2-3, we created an object as a group of properties. Each property has a name and a value. The following is an example of object literal, in which we list the properties in <code>{ }</code>.</p>

<pre><code class="language-JavaScript">var point = { x: 2, y: 3 };  
point.x;  // 2
dir(point); // show structure, only avail in Chrome console
</code></pre>

<h2 id="array-as-class">Array as Class</h2>

<p>JavaScript arrays are also objects, in the sense that an array has many methods, which we can invoke with the dot notation. In fact, each method is a property with a function as value. Refer to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array#Array_instances">online ref</a> for a list of methods of array objects.</p>

<pre><code class="language-JavaScript">var a = [2,3,4];
a.unshift(1);
a.push(5);
var b = a.map(x=&gt;x*2-1);
console.log(b.join(','));
</code></pre>

<p>A main difference between the object <code>point</code> and array objects is that there is a <dfn>constructor function</dfn> to create array objects.  In OOP sense, a <dfn>class</dfn> defines a template for similar objects, and provides (at least) one constructor object to build new objects belonging to the class.  We have a special syntax <code>[1,2,3]</code> to create new array objects in JavaScript. But you can also use the general constructor function syntax.</p>

<pre><code class="language-JavaScript">var b = new Array(2,4,6,8,10);
for (var x of b) {
  console.log(x);
}
</code></pre>

<h2 id="date">Date</h2>

<p>Up to now, we have encountered several built-in classes in JavaScript. They include
<code>Array</code> and <code>Map</code>. Before we discuss how to define our own class, let&rsquo;s examine the usage of another built-in class <code>Date</code>, which represents a single moment in time. <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Date">(online reference)</a></p>

<pre><code class="language-JavaScript">// call a constructor to create an object of the class
// create a Date object for this moment
var now = new Date();
// create a Date object for the Macau SAR establishment day
var sare = new Date(&quot;1999-12-20&quot;);
// create a Date object for the coming X'mas
var xmas = new Date(2016,11,25); // month: 0-11
</code></pre>

<pre><code class="language-JavaScript">// an object usually have some methods
var now = new Date();
var dow = now.getDay(); // 0-6, where 0 means Sunday
console.log(now.toLocaleString());
</code></pre>

<h2 id="maps">Maps</h2>

<p>ES6 defines a new kind of collections called <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a>. A map stores key/value pairs.
(In previous version of JavaScript, objects are often used as map.) You create a Map by submitting a list of key/value pairs to the constructor. Each pair is written as an array of two elements, namely key and value. You retrieve an element from a map using a key with the method <code>.get(key)</code>. You add / replace an element in the map with the method <code>.set(key,value)</code>. You can also delete an element from a map with <code>.delete(key)</code>, and check the number of elements with the property <code>.size</code>.</p>

<pre><code class="language-JavaScript">// creates a new Map with two key/value pairs
var m = new Map([ ['one', 1], ['two', 2] ]);
// use .get to retrieve an element
console.log('one =&gt; ', m.get('one'));
// use .set to add / replace an element
m.set('three', 3);
// now, m is Map {&quot;one&quot; =&gt; 1, &quot;two&quot; =&gt; 2, &quot;three&quot; =&gt; 3}
console.log('Does the map contains the key \'four\'? ', m.has('four'));
console.log('No, so .get returns ', m.get('four'));  // undefined
</code></pre>

<p>A map is iterable, and the <code>for ...of</code> loop returns a key/value pair in each step.</p>

<pre><code class="language-JavaScript">var m = new Map([ ['one', 1], ['two', 2], ['three', 3] ]);
for (var [k,v] of m) {
  console.log(`k = ${k}  v = ${v}`);
}
</code></pre>

<h2 id="defining-class">Defining class</h2>

<p>ES6 has a new syntax to define class. It is similar to the syntax in Java.</p>

<pre><code class="language-JavaScript">class Circle {
  // create a Circle object at (x,y) with the given radius
  constructor (x, y, radius) {
    // inside a constructor,
    // this refers to the new object being created
    this.x = x;
    this.y = y;
    this.radius = radius;
  }
  // define a method for Circle object
  area () {
    // inside a method,
    // this refers to the object that invokes the method
    return this.radius * this.radius * Math.PI;
  }
  // override the default toString method
  toString () {
    return `circle at (${this.x},${this.y}) of radius ${this.radius}`;
  }
}

var c = new Circle(0,0,10);
// call the method on the Circle object
var a = c.area();
console.log(`The area is ${a}.`);
// this calls c.toString()
console.log(`What is c? ${c}`);
</code></pre>

<p>The object created by a constructor is similar to object literal. Compare the structure of the two objects below.</p>

<pre><code class="language-JavaScript">// assume you've run the code listing above
dir(c);
var c2 = { x: 0, y: 0, radius: 10 };
dir(c2);
c2.area = function () { return this.radius*this.radius*Math.PI }
c2.area();
</code></pre>

<p>All properties in JavaScript objects are public. We can access the properties outside methods.</p>

<pre><code class="language-JavaScript">// assume the above definition of Circle class
// check whether the Circle c1 fully contains the Circle c2
function contains (c1, c2) {
  // calculate distance between center of the two circles
  var dist = Math.sqrt(Math.pow(c1.x-c2.x, 2) + Math.pow(c1.y-c2.y, 2));
  return (dist &lt; c1.radius-c2.radius);
}

var c1 = new Circle(0, 0, 10);
var c2 = new Circle(3, 4, 4);
var c3 = new Circle(3, 4, 8);
console.log('c1 contains c2? ', contains(c1,c2) );
console.log('c1 contains c3? ', contains(c1,c3) );
</code></pre>

<h2 id="exercise">Exercise</h2>

<ol>
<li><p>Define a class Point that can be used in the following ways</p>

<pre><code class="language-JavaScript">var p1 = new Point(0,0);
p1.toString();  // &quot;(0,0)&quot;
p1.moveTo(3,-2); // now p1 is (3,-2)
</code></pre></li>

<li><p>Define a function for the Point objects</p>

<pre><code class="language-JavaScript">var p1 = new Point(0,0);
var p2 = new Point(5,12);
var d = distance(p1, p2);  // 13
</code></pre></li>
</ol>

<!--
You can also iterate on the keys or values of a map. `m.keys()` and `m.values()`
return an iterable collection that contains the keys and values. And you can also use the spread operator `...` to insert the content of these collections into an array.

```JavaScript
var m = new Map([ ['one', 1], ['two', 2], ['three', 3] ]);
for (var k of m.keys()) {
  console.log(`k = ${k}`);
}

console.log('The keys are ', [...m.keys()]);
console.log('The values are ', [...m.values()]);
console.log('The elements are ', [...m]);
```


Example.

```JavaScript
var para = `JavaScript is a high-level, dynamic, untyped, and interpreted programming language. It has been standardized in the ECMAScript language specification. Alongside HTML and CSS, it is one of the three core technologies of World Wide Web content production; the majority of websites employ it and it is supported by all modern Web browsers without plug-ins. JavaScript is prototype-based with first-class functions, making it a multi-paradigm language, supporting object-oriented, imperative, and functional programming styles. It has an API for working with text, arrays, dates and regular expressions, but does not include any I/O, such as networking, storage, or graphics facilities, relying for these upon the host environment in which it is embedded.`;
// use space and punctuation marks to split the string into words
var words = para.split(/[ ,\.;\-]/);
// remove empty string
words = words.filter(w => w!=="");
// change all words into lower case
words = words.map(w => w.toLowerCase()); // 116 words in the paragraph

// count number of times a word appear in the paragraph
var wordCount = new Map();
for (var w of words) {
  if (wordCount.has(w)) {
    wordCount.set(w, wordCount.get(w)+1);
  } else {
    wordCount.set(w, 1);
  }
}

// print which words appear more than once
for (var [k,v] of wordCount) {
  if (v==1) continue;
  console.log(`${k}: ${v}`);
}
```
-->


      
      </div>
    </div>

    <div id="navigation">
        
        
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/jquery-2.x.min.js"></script>
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/perfect-scrollbar.min.js"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="/js/jquery.sticky-kit.min.js"></script>
    <script src="/js/featherlight.min.js"></script>
    <script src="/js/html5shiv-printshiv.min.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js"></script>
    <script src="/js/learn.js"></script>
    <script src="/js/hugo-learn.js"></script>
    

  </body>
</html>

