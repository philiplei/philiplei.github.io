<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.15" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />

    
    <title>3-6 Template</title>
    <link href="/css/nucleus.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/hybrid.css" rel="stylesheet">
    <link href="/css/featherlight.min.css" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
    <link href="/css/hugo-theme.css" rel="stylesheet">
    <style type="text/css">:root #header + #content > #left > #rlblock_left
    {display:none !important;}</style>
    

  </head>
  <body class="" data-url="/client/3-6/">
    <nav id="sidebar">
  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="http://www.ipm.edu.mo/">
<b>COMP312 Internet Programming II</b>
</a>

      
    </div>
</div>


  <div class="highlightable">
    <ul class="topics">
      
      
      
      

      <li class="dd-item  " data-nav-id="/basic/">
        <a href="/basic/">
          <span>
            
              <b>2. </b>
            
             JavaScript basics
            
           </span>
        </a>
        
        <ul>
          
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-1/">
              <a href="/basic/2-1/">
                <span>2-1 Basic data types and control     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-2/">
              <a href="/basic/2-2/">
                <span>2-2 Arrays and functions     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-3/">
              <a href="/basic/2-3/">
                <span>2-3 Objects and JSON data     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-4/">
              <a href="/basic/2-4/">
                <span>2-4 Callbacks and arrow functions     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-5/">
              <a href="/basic/2-5/">
                <span>2-5 Defining class     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/basic/2-6/">
              <a href="/basic/2-6/">
                <span>2-6 Reg expression     </i></span>
              </a>
            </li>
          
          
        </ul>
        
      </li>
      
      
      
      

      <li class="dd-item  parent" data-nav-id="/client/">
        <a href="/client/">
          <span>
            
              <b>3. </b>
            
             Client-side programming
            
           </span>
        </a>
        
        <ul>
          
          
          
          
            <li class="dd-item " data-nav-id="/client/3-1/">
              <a href="/client/3-1/">
                <span>3-1 First example     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-2/">
              <a href="/client/3-2/">
                <span>3-2 Select and change     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-3/">
              <a href="/client/3-3/">
                <span>3-3 Creating new content     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-4/">
              <a href="/client/3-4/">
                <span>3-4 Handling events     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-5/">
              <a href="/client/3-5/">
                <span>3-5 Form controls     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item active" data-nav-id="/client/3-6/">
              <a href="/client/3-6/">
                <span>3-6 Template     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-7/">
              <a href="/client/3-7/">
                <span>3-7 Charts     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-8/">
              <a href="/client/3-8/">
                <span>3-8 Page load and others     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/client/3-other/">
              <a href="/client/3-other/">
                <span>3-6 Advanced events     </i></span>
              </a>
            </li>
          
          
        </ul>
        
      </li>
      
      
      
      

      <li class="dd-item  " data-nav-id="/server/">
        <a href="/server/">
          <span>
            
              <b>4. </b>
            
             Server-side programming
            
           </span>
        </a>
        
        <ul>
          
          
          
          
            <li class="dd-item " data-nav-id="/server/4-1/">
              <a href="/server/4-1/">
                <span>4-1 Node.js primer     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-2/">
              <a href="/server/4-2/">
                <span>4-2 Events     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-3/">
              <a href="/server/4-3/">
                <span>4-3 Web client     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-4/">
              <a href="/server/4-4/">
                <span>4-4 Routing in web app     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-5/">
              <a href="/server/4-5/">
                <span>4-5 Middleware in web app     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-6/">
              <a href="/server/4-6/">
                <span>4-6 Template in web app     </i></span>
              </a>
            </li>
          
          
          
            <li class="dd-item " data-nav-id="/server/4-7/">
              <a href="/server/4-7/">
                <span>4-7 Database access     </i></span>
              </a>
            </li>
          
          
        </ul>
        
      </li>
      
      
    </ul>
    <hr>
      
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fa fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>
    </section>
  </div>
</nav>

        <section id="body">
        <div id="overlay"></div>

        <div class="padding highlightable">

            <div id="top-bar">
              
              <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                  <span id="sidebar-toggle-span">
                      <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                        <i class="fa fa-bars"></i>
                      </a>
                  </span>
                
                <span id="toc-menu"><a href=""><i class="fa fa-list-alt"></i></a></span>
                
                
                
                
                  
                
                  
                    
                    
                <a href="/client/" itemprop="url"><span itemprop="title">Client-side programming</span></a> <i class="fa fa-angle-right"></i>
                    
                  
                
                  
                
                <span itemprop="title"> 3-6 Template</span>
              </div>
              
                  <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#basic-operation:0acc7f683f17301d1361a2a9d40e010c">Basic operation</a></li>
<li><a href="#loop:0acc7f683f17301d1361a2a9d40e010c">Loop</a></li>
<li><a href="#conditions:0acc7f683f17301d1361a2a9d40e010c">Conditions</a></li>
<li><a href="#advanced-example:0acc7f683f17301d1361a2a9d40e010c">Advanced example</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

              

            </div>
            
    	        <div id="body-inner">
                
                <h1>3-6 Template</h1>
                



<p>When you need to display complicated JSON data in HTML with some repetitive parts, it is often more convenient to use a template library. This lab demonstrate how to use a template library called Handlebars. <a href="http://handlebarsjs.com/">online reference</a></p>

<p><a href="/chap3/p361.html">p361.html</a></p>

<p>Writing plan:</p>

<ol>
<li>template + context (data object) =&gt; html code</li>
<li>setup: load handlebars.js, embed template in <code>&lt;script&gt;</code>, functions call</li>
<li>{{}} handlebars expression</li>
<li>{{#each array}}</li>
<li>{{#if}}</li>
</ol>

<h2 id="basic-operation:0acc7f683f17301d1361a2a9d40e010c">Basic operation</h2>

<p>There are many HTML template systems. While their syntax can be quite different, the basic operation remain similar. First, a template defines the presentation of some data in some format. Handlebars uses HTML code directly in the template. In the template, there are some placeholders, to be replaced by some data later. In Handlebars, these placeholders use the expression <code>{{ }}</code>.</p>

<pre><code class="language-HTML">&lt;!-- a handlerbars template with two placeholders --&gt;
&lt;div class=&quot;entry&quot;&gt;
  &lt;h1&gt;{{title}}&lt;/h1&gt;
  &lt;div class=&quot;body&quot;&gt;
    {{body}}
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>The data used to fill in the template is often called the context object. It is a JavaScript object whose properties have names corresponding to the placeholders in the template.</p>

<pre><code class="language-JavaScript">var context = { title: 'My first post', body: &quot;This is my first post!&quot;};
</code></pre>

<p>Now, here is how to apply the template to display the data.</p>

<pre><code class="language-JavaScript">var source = &quot;&lt;div&gt;...&lt;/div&gt;&quot;; // the template as string
// compile the template string into a function
// this function can be used multiple times
var template = Handlebars.compile(source);
// put data in context object
var context = {title: &quot;My First Post&quot;, body: &quot;This is my first post!&quot;};
// call the template function to render the data
var html = template(context);
// the function returns the following HTML code
</code></pre>

<p>The template function in the last line returns the following HTML code.</p>

<pre><code class="language-HTML">&lt;!-- the placeholders are replaced by data in the context --&gt;
&lt;div class=&quot;entry&quot;&gt;
  &lt;h1&gt;My First Post&lt;/h1&gt;
  &lt;div class=&quot;body&quot;&gt;
    This is my first post!
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>There are some technical detail to embed the template in the HTML file and load the Handlebars library. Please refer to source code of <a href="/chap3/p361.html">p361.html</a>.</p>

<h2 id="loop:0acc7f683f17301d1361a2a9d40e010c">Loop</h2>

<p>Handlebars provides the block helper <code>{{#each property}} ... {{/each}}</code> to
repeat part of the template for each element in the named property, which is an array.
For example, we have a array of color in this context object.</p>

<pre><code class="language-JavaScript">var palette = { color: [
  { name: 'purple',  hexrgb: '#800080', decrgb: [128,0,128]},
  { name: 'fuchsia', hexrgb: '#FF00FF', decrgb: [255,0,255]},
  { name: 'lime',    hexrgb: '#00FF00', decrgb: [0, 255, 0]},
  { name: 'teal',    hexrgb: '#008080', decrgb: [0,128,128]},
  { name: 'aqua',    hexrgb: '#00FFFF', decrgb: [0,255,255]},
  { name: 'blue',    hexrgb: '#0000FF', decrgb: [0,0,255]}
]};
</code></pre>

<p>We use the following template to display the context object. The template generates one row for each element in the array <code>color</code>.</p>

<pre><code class="language-HTML">&lt;table class=&quot;color-table&quot;&gt;
&lt;thead&gt;
  &lt;tr&gt;&lt;td&gt;Color Name&lt;td&gt;Hex Code RGB&lt;td&gt;Decimal Code RGB&lt;/tr&gt;
&lt;tbody&gt;
  {{#each color}}
  &lt;tr style=&quot;background-color: {{name}}; color: white&quot;&gt;
    &lt;td&gt;{{name}}
    &lt;td&gt;{{hexrgb}}
    &lt;td&gt;{{decrgb}}
  &lt;/tr&gt;
  {{/each}}
&lt;/table&gt;
</code></pre>

<p>Inside the pair <code>{{#each color}}</code> and <code>{{/each}}</code>, the placeholders refer to each element in the array. Notice that we can also interpolate value in HTML attribute.  See <a href="/chap3/p362.html">p362.html</a> for how the example works.</p>

<h2 id="conditions:0acc7f683f17301d1361a2a9d40e010c">Conditions</h2>

<p>Suppose you have some objects that represents email. You want to show different icons to distinguish read email from unread email.</p>

<pre><code class="language-JavaScript">var email1 = { read: true, sender: 'Peter', subject: '..' };
var email2 = { read: false, sender: 'John', subject: '..' };
</code></pre>

<p>The block helper <code>{{#if}}</code> support simple conditional display of template content. In the following template, the first image is only shown when <code>read===true</code>. Otherwise, only the second image is shown. See <a href="/chap3/p363.html">p363.html</a> for the source code.</p>

<pre><code class="language-HTML">&lt;p&gt;
  {{#if read}}
  &lt;img src=&quot;mail-read.png&quot;/&gt;
  {{else}}
  &lt;img src=&quot;mail-unread.png&quot;/&gt;
  {{/if}}
  &lt;span class='sender'&gt;{{sender}}&lt;/span&gt;
  &lt;span class='subject'&gt;{{subject}}&lt;/span&gt;
&lt;/p&gt;
</code></pre>

<h2 id="advanced-example:0acc7f683f17301d1361a2a9d40e010c">Advanced example</h2>

<p>Time table example, template version.  Use both <code>{{#each}}</code> and <code>{{#if}}</code>.
Also need to enrich the context object.  (no logic in template.)
<a href="/chap3/p365.html">p365.html</a></p>


      
      </div>
    </div>

    <div id="navigation">
        
        
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/jquery-2.x.min.js"></script>
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/perfect-scrollbar.min.js"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="/js/jquery.sticky-kit.min.js"></script>
    <script src="/js/featherlight.min.js"></script>
    <script src="/js/html5shiv-printshiv.min.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js"></script>
    <script src="/js/learn.js"></script>
    <script src="/js/hugo-learn.js"></script>
    

  </body>
</html>

